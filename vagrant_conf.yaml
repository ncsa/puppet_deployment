---
# Defaults will be over-written by per-guest values
defaults:
    box: centos/7
    memory: 512
    env:
        PUPFROMDEFAULT: test_override

# Common data will be merged together with per-guest settings
common:
    env:
        PUPFROMCOMMON: test_merge
        PUPBKUPDIR: /vagrant/backups
    # commands are run in order specified here (top to bottom)
#    shell_always:
    # commands are run in order specified here (top to bottom)
    shell_once:
      - cmd: xargs -r -a /vagrant/yum_pkg_list.txt yum -y install
      - cmd: |
              git config --global user.email "vagrant"
              git config --global user.name "vagrant"
              git config --global push.default simple
      - cmd: ln -s /vagrant /root/puppet_deployment
      - cmd: |
             chown -R root:root /vagrant/.ssh
             ln -s /vagrant/.ssh /root/.ssh

# Define each VM
# Hash key is the VM name (use that argument to vagrant ssh)
# Use 'hostname' to set the hostname, or omit for vagrant to use the hash key
guests:
    master:
        hostname: puppet
        ip: 192.168.2.2
        memory: 3072
        env:
            PUPBUILDTYPE: master
            PUPCONFIGTYPE: r10k
    legacy:
        hostname: legacy
        ip: 192.168.2.3
        memory: 3072
        env:
            PUPBUILDTYPE: master
            PUPCONFIGTYPE: restore
    new:
        hostname: new
        ip: 192.168.2.4
        memory: 3072
        env:
            PUPBUILDTYPE: master
            PUPCONFIGTYPE: new
            
#    agent01:
#        ip: 192.168.2.100
#        env:
#            PUPBUILDTYPE: agent
#            PUPCERTNAME: lsst-test09.ncsa.illinois.edu
#            PUPMASTER: 192.168.2.2
